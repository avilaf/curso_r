<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R para no programadores</title>
    <meta charset="utf-8" />
    <meta name="author" content="Fernanda Rodrigues de Avila" />
    <meta name="date" content="2025-04-08" />
    <script src="libs/header-attrs-2.29/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





&lt;h3 style="text-align:center;"&gt;R - aplicado a estudios herpetológicos&lt;/h3&gt;

&lt;h3 style="text-align:center;"&gt;Clase 2: Trabajando con datos&lt;/h3&gt; 

&lt;p style="text-align:center;"&gt;Fernanda R. de Avila, fernandar.avila@gmail.com&lt;/p&gt;
&lt;p style="text-align:center;"&gt;Lab. de Herpetología - FCIEN, UDELAR&lt;/p&gt;

&lt;img src="index_files/figures/cry.png" width="30%" style="display: block; margin: auto;" /&gt;

---
layout: false
class: inverse, middle, center

# Trabajando con datos 


---
## Sobre el material de la clase 

Ahora que ya has dado tus primeros pasos en el ambiente R, vamos a avanzar un poco. En esta etapa vamos a aprender:

`\(~\)`

-   Configurar y guardar un proyecto;

-   Configurar el directorio de trabajo;

-   Insertar datos externos en el ambiente de trabajo;

-   Trabajar con diferentes fuentes de datos en R;

-   Exportar los resultados de nuestro trabajo de R a la memoria de la máquina;

-   Buenas prácticas escribiendo comandos.

---
layout: false
class: inverse, middle, center

# Configurar un proyecto  


---

## Configurar un proyecto 

.center[
Guardar un proyecto = **organización, reproducibilidad y eficiencia**

Archivo **.Rproj**
guardar tus análisis y toda su información (datos, scripts y outputs)
]

#### Interesante para: 

- Trabajos largos, con muchos análisis
- Trabajar en etapas sin perder tu progreso

- Ejemplo: bioinformática o modelado de distribución geográfica

`\(~\)`

.center[

#### Para guardar un proyecto, en RStudio, sigue los siguientes pasos:

`File &gt; New Project &gt; New Directory &gt; New Project`
]

---
layout: false
class: inverse, middle, center

# Directorio de trabajo  

---
## Directorio de trabajo

`\(~\)`


`\(~\)`


`\(~\)`

.center[
R asume que los archivos que vas a utilizar en tus análisis están todos almacenados en **la carpeta donde el propio R fue instalado** 
]

---

## Organizar tu trabajo en R

Reunir todos los archivos que deseas trabajar en una carpeta en tu computadora y definir esa carpeta como tu directorio de trabajo.

`\(~\)`

#### Carpetas estructuradas

```         
cursoR/
├── cursoR.Rproj
│
├── 00_scripts/
│   ├── 01-carregar-datos.R
│   ├── 02-analise.R
│   └── 03-graficos.R
│
├── 01_datos/
│   └── datos.csv
│
└── 02_output/
    └── graficos/
        └── boxplot.png
```

---

### Definir directorio de trabajo

`\(~\)`


``` r
# Ruta para la carpeta donde vamos a guardar los archivos:
path &lt;- "D:/curso_r" 
# si estás usando Windows, nota que la ruta que copiaste está con las barras posicionadas en sentido contrario al ejemplo de arriba (\ en lugar de /). Es necesario corregirlas en el script antes de ejecutar el comando.  

setwd(path) # definir el directorio

getwd() # este comando muestra cuál directorio está en uso

dir() # visualizar los archivos y subcarpetas del directorio


# guardar workspace
```

---


.center[
#### Versión de R instalada y directorio
]

`\(~\)`


&lt;img src="index_files/figures/console.png" width="80%" style="display: block; margin: auto;" /&gt;

---
layout: false
class: inverse, middle, center

# Insertando datos 


---
### Insertando datos

`\(~\)`

`\(~\)`

.center[
```
Matriz_Excel &lt;- (filas = unidades muestrales, 
                columnas = variables)
```
]


`\(~\)`

.center[
["datos_odonto.csv"](https://github.com/avilaf/curso_r/blob/cf708e2bb4116784de716f5ae1d58f9a141a256d/dados_odonto.csv#L1)


`\(~\)`

Dieta de dos poblaciones de *Odontophrynus asper* [(Machado et al.,
2018)](https://avilaf.github.io/meus_artigos/Diet%20of%20Odontophrynus%20americanus%20in%20southern%20Atlantic%20Forest%20of%20Brazi.pdf)
]

---



``` r
# Para importar datos en formato .csv que esté en tu directorio de trabajo:

# datos_odonto &lt;- read.csv("camino/para/archivo/dados_odonto.csv", header = TRUE)

# Aquí vamos a abrir directamente del repositorio online de github:

# install.packages("readr")
library(readr)

url &lt;- "https://raw.githubusercontent.com/avilaf/curso_r/main/dados_odonto.csv"

datos_odonto &lt;- readr::read_csv(url, 
                                locale = locale(encoding = "UTF-8"))
```

```
## Rows: 34 Columns: 36
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr  (2): pop, sex
## dbl (34): ind, massa_g, crc_mm, gastropoda_n, gastropoda_v, araneae_n, arane...
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

---


``` r
datos_odonto
```

```
## # A tibble: 34 × 36
##      ind pop   sex   massa_g crc_mm gastropoda_n gastropoda_v araneae_n
##    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;
##  1     1 A     M         7.8     37            0            0         0
##  2     2 A     M        11       38            0            0         0
##  3     3 A     F        12.3     45            0            0         0
##  4     4 A     M        16.2     48            0            0         0
##  5     5 A     M        14.5     44            0            0         0
##  6     6 A     F        23       55            0            0         0
##  7     7 A     M        11.6     44            0            0         0
##  8     8 A     M        12.7     45            0            0         1
##  9     9 A     M        12.1     43            0            0         0
## 10    10 A     M        14.6     44            0            0         0
## # ℹ 24 more rows
## # ℹ 28 more variables: araneae_v &lt;dbl&gt;, coleoptera_n &lt;dbl&gt;, coleoptera_v &lt;dbl&gt;,
## #   hymenoptera_n &lt;dbl&gt;, hymenoptera_v &lt;dbl&gt;, orthoptera_n &lt;dbl&gt;,
## #   orthoptera_v &lt;dbl&gt;, lepidoptera_larva_n &lt;dbl&gt;, lepidoptera_larva_v &lt;dbl&gt;,
## #   isopoda_n &lt;dbl&gt;, isopoda_v &lt;dbl&gt;, chilopoda_n &lt;dbl&gt;, chilopoda_v &lt;dbl&gt;,
## #   diplopoda_n &lt;dbl&gt;, diplopoda_v &lt;dbl&gt;, lepidoptera_n &lt;dbl&gt;,
## #   lepidoptera_v &lt;dbl&gt;, anelida_n &lt;dbl&gt;, anelida_v &lt;dbl&gt;, …
```

---

``` r
head(datos_odonto)
```

```
## # A tibble: 6 × 36
##     ind pop   sex   massa_g crc_mm gastropoda_n gastropoda_v araneae_n araneae_v
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1     1 A     M         7.8     37            0            0         0         0
## 2     2 A     M        11       38            0            0         0         0
## 3     3 A     F        12.3     45            0            0         0         0
## 4     4 A     M        16.2     48            0            0         0         0
## 5     5 A     M        14.5     44            0            0         0         0
## 6     6 A     F        23       55            0            0         0         0
## # ℹ 27 more variables: coleoptera_n &lt;dbl&gt;, coleoptera_v &lt;dbl&gt;,
## #   hymenoptera_n &lt;dbl&gt;, hymenoptera_v &lt;dbl&gt;, orthoptera_n &lt;dbl&gt;,
## #   orthoptera_v &lt;dbl&gt;, lepidoptera_larva_n &lt;dbl&gt;, lepidoptera_larva_v &lt;dbl&gt;,
## #   isopoda_n &lt;dbl&gt;, isopoda_v &lt;dbl&gt;, chilopoda_n &lt;dbl&gt;, chilopoda_v &lt;dbl&gt;,
## #   diplopoda_n &lt;dbl&gt;, diplopoda_v &lt;dbl&gt;, lepidoptera_n &lt;dbl&gt;,
## #   lepidoptera_v &lt;dbl&gt;, anelida_n &lt;dbl&gt;, anelida_v &lt;dbl&gt;, dermaptera_n &lt;dbl&gt;,
## #   dermaptera_v &lt;dbl&gt;, blattodea_n &lt;dbl&gt;, blattodea_v &lt;dbl&gt;, …
```

---

``` r
summary(datos_odonto)
```

```
##       ind            pop                sex               massa_g     
##  Min.   : 1.00   Length:34          Length:34          Min.   : 4.00  
##  1st Qu.: 9.25   Class :character   Class :character   1st Qu.: 6.20  
##  Median :17.50   Mode  :character   Mode  :character   Median :10.03  
##  Mean   :17.50                                         Mean   :10.13  
##  3rd Qu.:25.75                                         3rd Qu.:12.60  
##  Max.   :34.00                                         Max.   :23.00  
##      crc_mm       gastropoda_n     gastropoda_v      araneae_n     
##  Min.   :23.00   Min.   :0.0000   Min.   :  0.00   Min.   :0.0000  
##  1st Qu.:30.25   1st Qu.:0.0000   1st Qu.:  0.00   1st Qu.:0.0000  
##  Median :38.50   Median :0.0000   Median :  0.00   Median :0.0000  
##  Mean   :37.88   Mean   :0.2353   Mean   : 23.03   Mean   :0.1176  
##  3rd Qu.:44.00   3rd Qu.:0.0000   3rd Qu.:  0.00   3rd Qu.:0.0000  
##  Max.   :55.00   Max.   :3.0000   Max.   :408.00   Max.   :1.0000  
##    araneae_v       coleoptera_n     coleoptera_v    hymenoptera_n    
##  Min.   :  0.00   Min.   :0.0000   Min.   :  0.00   Min.   :0.00000  
##  1st Qu.:  0.00   1st Qu.:0.0000   1st Qu.:  0.00   1st Qu.:0.00000  
##  Median :  0.00   Median :0.0000   Median :  0.00   Median :0.00000  
##  Mean   : 41.79   Mean   :0.4412   Mean   : 32.32   Mean   :0.08824  
##  3rd Qu.:  0.00   3rd Qu.:0.0000   3rd Qu.:  0.00   3rd Qu.:0.00000  
##  Max.   :960.00   Max.   :4.0000   Max.   :360.00   Max.   :1.00000  
##  hymenoptera_v      orthoptera_n      orthoptera_v     lepidoptera_larva_n
##  Min.   :  0.000   Min.   :0.00000   Min.   :   0.00   Min.   :0.0000     
##  1st Qu.:  0.000   1st Qu.:0.00000   1st Qu.:   0.00   1st Qu.:0.0000     
##  Median :  0.000   Median :0.00000   Median :   0.00   Median :0.0000     
##  Mean   :  4.912   Mean   :0.05882   Mean   :  53.18   Mean   :0.3824     
##  3rd Qu.:  0.000   3rd Qu.:0.00000   3rd Qu.:   0.00   3rd Qu.:0.0000     
##  Max.   :100.000   Max.   :1.00000   Max.   :1440.00   Max.   :6.0000     
##  lepidoptera_larva_v   isopoda_n        isopoda_v       chilopoda_n     
##  Min.   :   0.0      Min.   :0.0000   Min.   :  0.00   Min.   :0.00000  
##  1st Qu.:   0.0      1st Qu.:0.0000   1st Qu.:  0.00   1st Qu.:0.00000  
##  Median :   0.0      Median :0.0000   Median :  0.00   Median :0.00000  
##  Mean   : 113.4      Mean   :0.5294   Mean   : 18.65   Mean   :0.05882  
##  3rd Qu.:   0.0      3rd Qu.:0.0000   3rd Qu.:  0.00   3rd Qu.:0.00000  
##  Max.   :2395.0      Max.   :5.0000   Max.   :294.00   Max.   :2.00000  
##   chilopoda_v      diplopoda_n       diplopoda_v     lepidoptera_n    
##  Min.   : 0.000   Min.   :0.00000   Min.   :  0.00   Min.   :0.00000  
##  1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:  0.00   1st Qu.:0.00000  
##  Median : 0.000   Median :0.00000   Median :  0.00   Median :0.00000  
##  Mean   : 1.059   Mean   :0.05882   Mean   : 13.65   Mean   :0.05882  
##  3rd Qu.: 0.000   3rd Qu.:0.00000   3rd Qu.:  0.00   3rd Qu.:0.00000  
##  Max.   :36.000   Max.   :1.00000   Max.   :400.00   Max.   :1.00000  
##  lepidoptera_v      anelida_n        anelida_v       dermaptera_n  dermaptera_v
##  Min.   : 0.000   Min.   :0.0000   Min.   :  0.00   Min.   :0     Min.   :0    
##  1st Qu.: 0.000   1st Qu.:0.0000   1st Qu.:  0.00   1st Qu.:0     1st Qu.:0    
##  Median : 0.000   Median :0.0000   Median :  0.00   Median :0     Median :0    
##  Mean   : 1.765   Mean   :0.2353   Mean   : 13.76   Mean   :0     Mean   :0    
##  3rd Qu.: 0.000   3rd Qu.:0.0000   3rd Qu.:  0.00   3rd Qu.:0     3rd Qu.:0    
##  Max.   :30.000   Max.   :7.0000   Max.   :300.00   Max.   :0     Max.   :0    
##   blattodea_n       blattodea_v      neoroptera_n      neoroptera_v    
##  Min.   :0.00000   Min.   :  0.00   Min.   :0.00000   Min.   :  0.000  
##  1st Qu.:0.00000   1st Qu.:  0.00   1st Qu.:0.00000   1st Qu.:  0.000  
##  Median :0.00000   Median :  0.00   Median :0.00000   Median :  0.000  
##  Mean   :0.02941   Mean   : 11.12   Mean   :0.02941   Mean   :  2.941  
##  3rd Qu.:0.00000   3rd Qu.:  0.00   3rd Qu.:0.00000   3rd Qu.:  0.000  
##  Max.   :1.00000   Max.   :378.00   Max.   :1.00000   Max.   :100.000  
##      otros          n_total         vol_total      
##  Min.   :  0.0   Min.   : 0.000   Min.   :   0.00  
##  1st Qu.:  0.0   1st Qu.: 0.000   1st Qu.:  89.25  
##  Median : 40.0   Median : 1.000   Median : 188.50  
##  Mean   :125.4   Mean   : 2.324   Mean   : 457.03  
##  3rd Qu.:142.0   3rd Qu.: 3.000   3rd Qu.: 551.25  
##  Max.   :962.0   Max.   :13.000   Max.   :2963.00
```

---

`\(~\)`

.pull-left[

``` r
# podemos aislar esos datos y hacer muchas cosas con la información. Por ejemplo un gráfico:

# install.packages("ggplot2")
library(ggplot2)

theme_set(theme_bw())

ggplot(data = datos_odonto, 
       aes(x = crc_mm, 
           y = massa_g)) +
  geom_point(color = "gold3") +
  geom_smooth(method = "lm", 
              se = F,
              color = "firebrick") +
  labs(x = "Largo hocico-cloaca (mm)",
       y = "Masa (g)")
```
]

.pull-right[
![](curso_r_slides_clase_2_files/figure-html/datos5-out-1.png)&lt;!-- --&gt;
]

---
layout: false
class: inverse, middle, center

# Convertir datos

---
### Convertir datos

Funciones: **as.numeric()**, **as.character()**, **as.logical()** etc.


``` r
# Ejemplo:


a &lt;- "42" # atribuye el valor de "42" al objeto "a"

class(a) # Retorna "character"
```

```
## [1] "character"
```

``` r
a # Nota que el número está escrito entre comillas. 
```

```
## [1] "42"
```

``` r
# Este formato en el lenguaje R significa que este número está almacenado como un "character" o "string", o sea, como texto.
```

---

### Texto para número

`\(~\)`


``` r
b &lt;- as.numeric(a)  # Convierte el string "42" para número 42

b
```

```
## [1] 42
```

``` r
class(b) # Retorna "numeric"
```

```
## [1] "numeric"
```

---

### Ejemplo

`\(~\)`

`\(~\)`


``` r
# con nuestros datos de anfibios

ind &lt;- c(datos_odonto$ind)

ind
```

```
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30 31 32 33 34
```

``` r
class(ind) # R interpreta esos datos como valores numéricos
```

```
## [1] "numeric"
```

---

## Cómo "character"

`\(~\)`

`\(~\)`


``` r
ind_string &lt;- as.character(ind) # queremos que sepa que esos números son los "nombres" de nuestras muestras

ind_string
```

```
##  [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10" "11" "12" "13" "14" "15"
## [16] "16" "17" "18" "19" "20" "21" "22" "23" "24" "25" "26" "27" "28" "29" "30"
## [31] "31" "32" "33" "34"
```

``` r
class(ind_string)
```

```
## [1] "character"
```

---
layout: false
class: inverse, middle, center

# Paquetes

---
### Paquetes

`\(~\)`

`\(~\)`

.center[
**Funciones básicas** implementadas sin bajar y cargar bibliotecas adicionales

**Paquetes:** cajas de herramientas  que facilitan analizar datos, hacer gráficos, mapas... que **extienden las funcionalidades** básicas
]

`\(~\)`

.center[
```


pauquetes &lt;- conjuntos_organizados_de(funciones, 
                                      datos,
                                      documentación) 

```
]

`\(~\)`


---
#### En RStudio:

**"Packages"** : 

- los **paquetes cargados** estarán señalizados 
- puedes cargar los paquetes  

&lt;img src="index_files/figures/rstudio_packages.png" width="40%" style="display: block; margin: auto;" /&gt;

`\(~\)`

.center[
*Lo ideal es tener el comando para cargar el paquete detallado siempre en
tu script* así tendrás las etapas de tu proyecto **automatizadas** y no correrás el riesgo de olvidar algún paquete importante.
]

---

### Ejemplo


``` r
# Creando un data frame de ejemplo
datos &lt;- data.frame(idade = c(25, 30, NA, 40, 35))


# Función base mean()

mean(datos)
```

```
## Warning in mean.default(datos): argumento não é numérico nem lógico: retornando
## NA
```

```
## [1] NA
```
--

#### Qué paso?

Respuesta  = **vector vacío "[NA]"**

Esto ocurre porque la función base, por default, no calcula promedio cuando uno de los argumentos no sea numérico.

---
.center[
### Qué hacemos?
]

`\(~\)`

`\(~\)`

`\(~\)`

&lt;img src="index_files/figures/kermit_sad.png" width="40%" style="display: block; margin: auto;" /&gt;


---
### Opción 1:

`\(~\)`

Implementar una función nueva:


``` r
# Función creada por el usuario para calcular promedio ignorando NAs

minha_media &lt;- function(x) {
  x_sim_na &lt;- x[!is.na(x)]
  suma &lt;- sum(x_sim_na)
  n &lt;- length(x_sim_na)
  media &lt;- suma / n
  return(media)
}

# Aplicando la función
minha_media(datos$idade)
```

```
## [1] 32.5
```

---
### Opción 2:

`\(~\)`

`\(~\)`

Paquete **"dplyr"**: editar datos y extraer mucha información.

.pull-left[

``` r
# Instalar paquete
# install.packages("dplyr")

# Cargar el paquete
library(dplyr)
```
]


.pull-right[

``` r
# Usando la función summarise de dplyr

datos %&gt;%
  summarise(media_idade = mean(idade, 
                               na.rm = TRUE))
```

```
##   media_idade
## 1        32.5
```
]

---

## Opción 3:

`\(~\)`

`\(~\)`

Corregir la función `base::mean`


``` r
mean(datos$idade, na.rm = TRUE)
```

```
## [1] 32.5
```

`\(~\)`

`\(~\)`

--

#### Cómo sabemos?

---
layout: false
class: inverse, middle, center

# Buscando ayuda

---


`\(~\)`

**Otros softwares estadísticos pagos:** ayuda = asistencia del provedor

--

**R:** software libre = sin asistencia?

--

`\(~\)`

&lt;img src="index_files/figures/y-ahora-quien-podra-defenderme.jpg" width="30%" style="display: block; margin: auto;" /&gt;

---


### Comunidad R 

**Grande, activa y colaborativa:**

- Páginas web
- Grupos de email 
- Foros 
- Tutoriales

---

## Documentación de los paquetes

`\(~\)`

`\(~\)`


``` r
# Supongamos que queremos saber más sobre la función "plot" implementada en la base del propio R

?base::plot

# o

help(plot)
```

---

### Ejemplo


.pull-left[

`\(~\)`

`\(~\)`


``` r
# copiamos la información disponible en el 
#"Help", la ejecutamos y analizamos 
# cómo se comporta el código:


require(graphics) # for plot methods


plot(cars)
```
]

.pull-right[
![](curso_r_slides_clase_2_files/figure-html/grafico-out-1.png)&lt;!-- --&gt;
]

---

### Ahora adaptamos para nuestro contexto:

.pull-left[

`\(~\)`


``` r
# Organizamos los datos

datos_plot &lt;- data.frame(CRC = datos_odonto$crc_mm, 
                         Massa = datos_odonto$massa_g)

plot(datos_plot)
```
]

.pull-right[
![](curso_r_slides_clase_2_files/figure-html/grafico-out2-1.png)&lt;!-- --&gt;
]

---

### Línea de tendencia

.pull-left[

`\(~\)`


``` r
# la función para calcular y graficar la línea de tendencia es un poco más compleja, vamos a buscar ayuda

#?abline

# también podemos alterar parámetros estéticos del gráfico

plot(Massa ~ CRC, 
     data = datos_plot,
     col = 7,
     pch = 16)

abline(lm(Massa ~ CRC, 
          data = datos_plot), 
       col = 2) 


# Nota que este comando contiene el gráfico de la línea y la ecuación de la recta, dos funciones. ¿Puedes identificar esos elementos en el código?
```
]

.pull-right[
![](curso_r_slides_clase_2_files/figure-html/grafico-out3-1.png)&lt;!-- --&gt;
]


---
### Resumen:

`\(~\)`

Al final conseguimos ejecutar varias tareas: 

`\(~\)`

- Gráfico de dispersión simple; 
- Ecuación de la recta; 
- Gráfico estilizado con la línea de tendencia.

&lt;img src="index_files/figures/sapo_pc.jpg" width="50%" style="display: block; margin: auto;" /&gt;

---

layout: false
class: inverse, middle, center

# Exportando datos y figuras


---

### Datos

Es natural que, una vez hecha alguna transformación o cálculo con tus datos
brutos, quieras **exportarlos en un archivo que pueda ser visualizado y manipulado en otros softwares** fuera del ambiente R. Esta es una tarea simple,
que podemos hacer en el propio script de la siguiente forma:

`\(~\)`


``` r
# supongamos que necesitas exportar el objeto que creamos para 
# el gráfico en un archivo .csv que pueda ser abierto con Excel

datos_plot # este objecto R

class(datos_plot)

write.csv(datos_plot,"~/01_datos/datos_plot.csv") 
```

`\(~\)`

Puedes verificar en tu directorio si el archivo fue guardado y cómo fue guardado.

---

## Figuras

De la misma forma podemos exportar para nuestro directorio los **gráficos o mapas**


``` r
# Son 3 pasos

# 1- Crear la imagen

jpg('~/02_resultados/grafico_odonto.jpg')


# 2- Crear el gráfico

plot(Massa ~ CRC, 
     data = datos_plot,
     col = 7,
     pch = 16)

abline(lm(Massa ~ CRC, data = datos_plot), col = 2) 

# 3- Cerrar el archivo
dev.off()
```

Así como hicimos con los datos, puedes verificar en tu directorio si la figura
fue exportada y cómo fue guardada.

---
### Exportar gráficos con RStudio


Otra opción igualmente práctica para guardar una figura a partir de RStudio es
guardar haciendo clic en el **botón Export**, en la parte superior de la ventana **Plots**:

&lt;img src="index_files/figures/grafico.png" width="50%" style="display: block; margin: auto;" /&gt;

---
layout: false
class: inverse, middle, center

# Buenas prácticas escribiendo comandos

---

### Buenas prácticas escribiendo comandos

`\(~\)`

.center[
El intérprete de R es bastante eficiente y **no exige que tengamos gran afinidad con lenguaje de programación** para utilizarlo. 

`\(~\)`

Esto facilita mucho nuestro aprendizaje y nuestro trabajo.
]

`\(~\)`

`\(~\)`

&lt;img src="index_files/figures/sapo.jpg" width="25%" style="display: block; margin: auto;" /&gt;

---

### Ejemplo

**R no tiene en cuenta:**
espaciado entre caracteres y indentación (organizar el código en párrafos)



``` r
# R interpreta igualmente los dos codigos:

# 1- con espaciado y indentación

bonito &lt;- c("Ololygon",
            "Scinax",
            "Boana")  

bonito
```

```
## [1] "Ololygon" "Scinax"   "Boana"
```

``` r
# 2- sin espaciado ni identación
feo&lt;-c("Ololygon","Scinax","Boana") 
feo
```

```
## [1] "Ololygon" "Scinax"   "Boana"
```

---

### Importante mantener el material legible

`\(~\)`

`\(~\)`

.center[
#### no es porque el intérprete de la máquina puede leer, que otra persona que va a replicar tu código (o tú mismo/a en el futuro) va a descifrar la lógica de tu proyecto
]

--

`\(~\)`

`\(~\)`

### O sea...

.center[

Tener en cuenta la **legibilidad del código** = trabajo replicable y eficiente
]

---
layout: false
class: inverse, middle, center

# Ejemplo de *Python*


---
### Ejemplo de *Python*

`\(~\)`

.center[
Lenguaje de programación que también es ampliamente utilizado en análisis de datos, que posee una comunidad gigante y muy activa

Para ese lenguaje existe una serie de recomendaciones bien humoradas llamadas
el [Zen of Python](https://pt.wikipedia.org/wiki/Zen_of_Python) 

(**principios de diseño**)
]

&lt;img src="index_files/figures/Python-Logo.png" width="30%" style="display: block; margin: auto;" /&gt;


---

## Zen of Python

`\(~\)`


-   **Hermoso** es mejor que feo.


``` r
# Feo
f &lt;- function(x) if(x &gt; 0) x + 1 else x - 1

# Hermoso
ajusta_valor &lt;- function(x) {
  if (x &gt; 0) {
    return(x + 1)
  } else {
    return(x - 1)
  }
}
```

---

`\(~\)`


`\(~\)`


`\(~\)`


`\(~\)`


-   **Explícito** es mejor que implícito.


``` r
# Implícito (puede causar confusión si muchas bibliotecas son cargadas)

library(tidyverse)

filter(data)  # Puede ser ambiguo (conflicto con 'stats::filter')

# Explícito

dplyr::filter(data)  # Claro de dónde viene la función
```

---

`\(~\)`


`\(~\)`


`\(~\)`


`\(~\)`




-   **Simple** es mejor que complejo.

-   **Complejo** es mejor que complicado.


``` r
# Complejo
result &lt;- sapply(1:10, function(x) if(x %% 2 == 0 &amp;&amp; x &gt; 4) x^2 else NULL)

# Simple
result &lt;- c()
for (x in 1:10) {
  if (x %% 2 == 0 &amp;&amp; x &gt; 4) {
    result &lt;- c(result, x^2)
  }
}
```

---

`\(~\)`


`\(~\)`


`\(~\)`


`\(~\)`



-   **E s p a r s o** es mejor que *denso*.

-   **Legibilidad** cuenta.


``` r
# Menos legible
x&lt;-1;y&lt;-2;z&lt;-x+y

# Más legible
x &lt;- 1
y &lt;- 2
z &lt;- x + y
```

--

-   Si la implementación es **difícil de explicar, es una mala idea**

-   Si la implementación es **fácil de explicar, puede ser una buena idea**

---
layout: false
class: inverse, middle, center

# Organizar los scripts

---

### Organizar los scripts


#### Sugestión

-   Un **encabezado** con: título, descripción de los análisis, tu nombre, la fecha del análisis y otras informaciones pertinentes

--

-   Un sector para **bajar y cargar los paquetes** necesarios durante el análisis

--

-   Un sector para asignar el **directorio de trabajo**

--

-   Otro para **cargar los datos**

--

-   El desarrollo del **análisis**

--

-   La finalización de los análisis con la exportación de los **resultados**

--

-   Finalizar con las **referencias** de los paquetes y de R para reportar en tu
    publicación.

---
### Ejemplo pt. 1

`\(~\)`


-   Un **encabezado** con: título, descripción de los análisis, tu nombre, la fecha del análisis y otras informaciones pertinentes
-   Un sector para **bajar y cargar los paquetes** necesarios durante el análisis


``` r
# Plotando um mapa simples com o pacote "mapdata"
# Example worksheet by Fernanda Rodrigues de Avila
# R version 4.5.0

# Paquete -----------------------------------------------------------------


# install.packages("mapdata") # instalar

library(mapdata) # cargar
```

---

### Ejemplo pt. 2

`\(~\)`


-   Un sector para **cargar los datos**

-   El desarrollo del **análisis**


``` r
# Cargando datos ----------------------------------------------------------

RegHR &lt;- map("worldHires", namesonly = TRUE, plot = FALSE)

# Mapa --------------------------------------------------------------------

mapa &lt;- map('worldHires', 
            fill = TRUE, 
            col = terrain.colors(6),  
            bg = "#CCEEFF", 
            region = RegHR[-grep("Antarctica", RegHR)])

mapa # ver el mapa
```

---

### Ejemplo pt. 3

`\(~\)`

-   La finalización de los análisis con la exportación de los **resultados**


``` r
# Exportar mapa --------------------------------------------------------

# 1- Crear la imagen

jpg('~/mapa_ejemplo.jpg') # local para salvar


# 2- Repetir mapa

mapa

# 3- Cerrar el archivo

dev.off()
```


---

### Ejemplo pt. 4 (final)

`\(~\)`

-   Finalizar con las **referencias** de los paquetes y de R para reportar en tu
    publicación


``` r
# Referencias ----------------------------------------------------------

citation() # R

RStudio.Version() # RStudio

citation("mapdata") # Paquete "mapdata"

###############################_fin_####################################

# R version 4.5.0 (2025-04-11 ucrt)

# Dra. Fernanda Rodrigues de Avila 
# &lt;https://avilaf.github.io/&gt;
# fernandar.avila@gmail.com
```

---
layout: false
class: inverse, middle, center

# Pseudocódigo

---
### Pseudocódigo

`\(~\)`

.center[
Útil cuando aún **no conocemos muchas funciones** o formas de interactuar con un lenguaje de programación

**Pseudocódigo**: un esquema lógico, en nuestra lengua materna, que seguimos para realizar nuestro trabajo en R (o en otro lenguaje)
]

`\(~\)`

--

.center[
#### Importante

Como el lenguaje **R es muy simple**, probablemente no lo vas a utilizar por mucho tiempo 

Pero puede ser una **herramienta didáctica** interesante para iniciar tu jornada en este nuevo lenguaje

]

---

### Ejemplo pt. 1

Has hecho campos nocturnos en algunos sitios reproductivos y muestreado las **comunidades de anfibios**

--

Después de los campos tabulaste los datos y generaste el siguiente dataframe en tu archivo de Excel:

&lt;img src="index_files/figures/excel.png" width="50%" style="display: block; margin: auto;" /&gt;
--

`\(~\)`

Abundancia de anfibios

--

Diferentes especies y comunidades

--

Días de muestreo

--

Tipo de hábitat ("agr" = agricultura y "nat" = hábitat natural) 

--

La columna "local" informa cuatro lugares de colecta ("a", "b", "c" y "d")

---

### Ejemplo pt. 2

Tu objetivo es calcular la **abundancia total** en cada sitio de colecta en cada noche de muestreo

--

Quieres hacer esto en R, pero aún no estás familiarizado/a con el lenguaje

--

`\(~\)`

Puedes utilizar el pseudocódigo para organizar tus ideas antes de escribir el código real:


``` r
# En tu script, usa comentarios (#) para organizar el pseudocódigo y escribe las etapas

# datos &lt;- importar (archivo.csv)

# abundancias &lt;- recortar variables respuesta (datos)

# soma &lt;- sumar las filas (abundancias)

# datos_completos &lt;- juntar (datos, abundancias)
```

---
### Ejemplo pt. 3 


``` r
# ahora que tenemos un camino que parece simple y puede funcionar, buscando las funciones correctas puedes escribir los comandos

# datos &lt;- importar (archivo.csv)

datos &lt;- read.table(header = TRUE,
text = "dia	habitat	local	Dendropsophus_sanborni	Dendropsophus_minutus Pseudopaludicola_falcipes	Boana_pulchella	Leptodactylus_gracilis Scinax_fuscovarius
1	agr	a	10	0	15	1	3	2
1	agr	b	6	11	20	7	1	9
1	nat	c	13	3	18	4	6	5
1	nat	d	9	14	23	10	4	12
2	agr	a	8	0	13	0	1	0
2	agr	b	4	9	18	5	0	7
2	nat	c	11	1	16	2	4	3
2	nat	d	7	12	21	8	2	10
3	agr	a	11	1	16	2	4	3
3	agr	b	7	12	21	8	2	10
3	nat	c	14	4	19	5	7	6
3	nat	d	10	15	24	11	5	13
4	agr	a	9	0	14	0	2	1
4	agr	b	5	10	19	6	0	8
4	nat	c	13	3	18	4	6	5
4	nat	d	9	14	23	10	4	12
")
```

---
### Ejemplo pt. 4 (final)


``` r
# abundancias &lt;- recortar variables respuesta (datos)
abundancias &lt;- datos[1:16,4:9]

# soma &lt;- sumar las filas (abundancias)
soma &lt;- as.vector(rowSums(abundancias))

# datos_completos &lt;- juntar (datos, abundancias)
datos_completos &lt;- cbind(datos, soma)

datos_completos$soma # la última columna de este dataframe almacena la suma de las abundancias 
```

```
##  [1] 31 54 49 72 22 43 37 60 37 60 55 78 26 48 49 72
```

--

.pull-left[
#### Simple?
]
.pull-right[
&lt;img src="index_files/figures/kermit_think.png" width="40%" style="display: block; margin: auto;" /&gt;
]

---

### Más allá de los números...

Vamos a hacer un gráfico con las abundancias, por diversión:

.pull-left[

`\(~\)`


``` r
# Gráfico

boxplot(soma ~ habitat, 
     data = datos_completos,
     col = c(7, 3)
     )

# Abundancias totales por habitat
```

Parece que los valores de abundancia no son iguales entre los tratamientos
]
.pull-right[
&lt;img src="curso_r_slides_clase_2_files/figure-html/fugura_bound-out-1.png" width="70%" /&gt;
]

---

### Vamos a jugar un poco más


Podemos hacer una prueba rápida para descubrir si ese patrón visual tiene significancia
estadística



``` r
# Para comparar muestras de dos tratamientos 
# con variables respuesta cuantitativas (como es nuestro caso) 
# podemos usar una Teste T de Student (paramétrico) 
# o Mann-Whitney (no paramétrica). 
# Vamos a probar los supuestos de la Prueba T antes de calcular:


# probar la normalidad con Shapiro-Wilk
# H0: los datos de la muestra provienen de una población con distribución normal

shapiro.test(x = datos_completos$soma)
```

```
## 
## 	Shapiro-Wilk normality test
## 
## data:  datos_completos$soma
## W = 0.97118, p-value = 0.8573
```

``` r
# p &gt; 0,05: no rechazamos la premisa de normalidad de los datos (H0)
```

---
### Graficar la distribuición

.pull-left[

``` r
# Graficar la probabilidad de 
# la distribución normal:

qqnorm(datos_completos$soma, 
       pch = 1, frame = FALSE) # datos

qqline(datos_completos$soma, 
       col = "steelblue", lwd = 2) # recta

# parece que los datos se 
# ajustan bien a la normalidad
```
]

.pull-right[
&lt;img src="curso_r_slides_clase_2_files/figure-html/distribuicion-out-1.png" width="70%" /&gt;
]

---

### Homogeneidad de las varianzas


``` r
# Paquete:

# install.packages("car")
# library(car)

# Levene's test
# H0: las varianzas de las poblaciones son iguales

car::leveneTest(soma ~ habitat, data = datos_completos)
```

```
## Warning in leveneTest.default(y = y, group = group, ...): group coerced to
## factor.
```

```
## Levene's Test for Homogeneity of Variance (center = median)
##       Df F value Pr(&gt;F)
## group  1  0.0121 0.9138
##       14
```

``` r
# p &gt; 0,05: no rechazamos la premisa de homogeneidad de las varianzas (H0)
```

---

### Teste T


``` r
# Ahora la prueba
teste_t &lt;- t.test(soma ~ habitat, 
                  data = datos_completos,
                  var.equal = T)

teste_t
```

```
## 
## 	Two Sample t-test
## 
## data:  soma by habitat
## t = -2.729, df = 14, p-value = 0.0163
## alternative hypothesis: true difference in means between group agr and group nat is not equal to 0
## 95 percent confidence interval:
##  -33.709275  -4.040725
## sample estimates:
## mean in group agr mean in group nat 
##            40.125            59.000
```

---

### Ejercicios

`\(~\)`


.center[
Ahora que sabes insertar, trabajar y exportar datos, buscar ayuda puedes
aventurarte un poco y practicar algunos comandos con los ejercicios de esta etapa


`ejercicios_2.Rmd`

]

&lt;img src="index_files/figures/kermit_tranqui.png" width="50%" style="display: block; margin: auto 0 auto auto;" /&gt;

---

`\(~\)`

`\(~\)`


&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="index_files/figures/site.png" alt="avilaf.github.io/esp" width="70%" /&gt;
&lt;p class="caption"&gt;avilaf.github.io/esp&lt;/p&gt;
&lt;/div&gt;
&lt;p style="text-align:center;"&gt;fernandar.avila@gmail.com&lt;/p&gt;
&lt;p style="text-align:center;"&gt;Lab. de Herpetología - FCIEN, UDELAR&lt;/p&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "github",
  "highlightLines": true,
  "countIncrementalSlides": false,
  "ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
